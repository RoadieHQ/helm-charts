{{- if .Values.backend.enabled }}
---
apiVersion: v1
kind: Service
metadata:
  name: {{ include "backstage.fullname" . }}

spec:
  ports:
    - port: 80
      targetPort: {{ .Values.backend.containerPort }}

  selector:
    app: backstage
    component: backend

  type: ClusterIP
{{- end }}

{{- if .Values.lighthouse.enabled }}
---
apiVersion: v1
kind: Service
metadata:
  name: {{ include "backstage.fullname" . }}-lighthouse

spec:
  ports:
    - port: 80
      targetPort: {{ .Values.lighthouse.containerPort }}

  selector:
    app: backstage
    component: lighthouse-audit-service

  type: ClusterIP
{{- end }}

{{- if .Values.gitops.enabled }}
---
apiVersion: v1
kind: Service
metadata:
  name: {{ include "backstage.fullname" . }}-gitops-api

spec:
  ports:
    - port: 80
      targetPort: {{ .Values.gitops.containerPort }}

  selector:
    app: backstage
    component: gitops-api

  type: ClusterIP
{{- end }}
